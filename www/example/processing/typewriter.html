<script src="../../../lib/processing.js"></script>
<script src="../../../src/rita.js"></script>
<script type="text/processing" data-processing-target="mycanvas">
	
var idx, rt, curs;

void setup() 
{ 
  size(500,100);
 
  RiText.defaultFont("Courier", 24);

  rt = new RiText("A line of text with a cursor.");
  curs = new RiText("|");
  
  RiTa.timer("blink", .5f);
  RiTa.timer("move",   2f);
  
  moveCursor();
}

void onRiTaEvent(RiTaEvent re) { 
  if (re.getTag().equals("blink"))
    curs.setVisible(!curs.isVisible()); 
  else
    moveCursor(); // "move"
}

void moveCursor() {
  if (++idx == rt.length()) idx = 0;
  var x = rt.boundingBox().x;
  x += curs.textWidth()/-2f + idx*curs.textWidth();
  curs.position(x+2, rt.y); 
}

void draw() {
  background(255);
}

</script>
<canvas id="mycanvas" style="border: 1px solid #000000;"></canvas>
