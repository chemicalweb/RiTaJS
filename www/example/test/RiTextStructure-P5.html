<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <link rel="stylesheet" href="rita-test.css" type="text/css" media="screen" />
    <script type="text/javascript" src="../../lib/jquery.js"></script>
    <script type="text/javascript" src="../../lib/qunit-git.js"></script>
    <script type="text/javascript" src="../../lib/processing-1.3.6.js"></script>
    <script type="text/javascript" src="../rita.js"></script>
    <script type="text/processing" data-processing-target="mycanvas">
    <script>
    
        void setup() {
            size(200,200);
            background(250);
            RiText("Hello from RiTa[P5]").draw();
        }

        $(document).ready(function(){

            test("Public Objects", function() {

                ok(RiTa.VERSION>0);
                ok(typeof RiTa != 'undefined');
                ok(typeof RiString != 'undefined');
                ok(typeof RiLexicon != 'undefined');
                ok(typeof RiText != 'undefined');          
            });

            test("Constructors", function() {

                equal(typeof RiText, 'function'); 

                var rx = new RiText("hello");
                equal(typeof rx, 'object');

                var rx2 = RiText("hello");
                equal(typeof rx2, 'object');

                var rx3 = new RiText(new RiString("hello"));
                equal(typeof rx3, 'object');

                var rx3 = RiText(RiString("hello"));
                equal(typeof rx3, 'object');
            });

            test("Member Functions", function() {

                var rx = new RiText("hello");
                equal(typeof rx.toString, 'function');

                var rx = new RiText("hello");
                equal(typeof rx.draw, 'function');

                var rx = new RiText("hello");
                ok(rx.textWidth()>0);

                var rs = RiString("hello");
                equal(typeof rs.__init__,'function');
            });

            test("Public Constants", function() {

                ok(RiText.PARAGRAPH);
                ok(RiText.LEFT);
                ok(RiText.CENTER);
            });

            test("Public Statics", function() {

                equal(typeof RiText.foreach,'function');
                equal(typeof RiText.drawAll,'function');
                equal(typeof RiText.defaultColor,'function');
                ok(RiText.defaults);
                ok(RiText.defaults.color);
                ok(RiText.defaults.paragraphLeading || RiText.defaults.paragraphLeading==0);
            });

            test("Member Variables", function() {

                ok(RiText("yahdh").x);
                ok(new RiText("x").y);
                ok(RiText()._color);
                ok(new RiText()._scaleX);
                ok(typeof RiText()._rotateZ != 'undefined'); 
                ok(new RiText().y);
            });


            test("RiText.dispose[single]", function() {  

                RiText.instances = [];
                equal(RiText.instances.length,0);

                var r1 = new RiText("hello1"); 
                var r2 = new RiText("hello2");

                equal(RiText.instances.length,2);
                RiText.dispose(r1);
                equal(RiText.instances.length,1); 
                RiText.dispose(r2);
                equal(RiText.instances.length,0); 
            });

            test("RiText.dispose[array]", function() {  

                RiText.instances = [];
                equal(RiText.instances.length,0);
                new RiText("extra");
                equal(RiText.instances.length,1);

                var arr = [];
                for ( var i = 0; i < 10; i++) {
                    arr.push(new RiText("hello"+i)); 
                }

                ok(arr.length==10);
                ok(RiText.instances.length==11);

                RiText.dispose(arr);
                equal(RiText.instances.length,1);

                RiText.dispose(arr);
                equal(RiText.instances.length,1);
            });

            test("RiText.dispose[all]", function() {  

                RiText.instances = [];
                equal(RiText.instances.length,0);

                for ( var i = 0; i < 10; i++) {
                    new RiText("hello"+i); 
                }

                equal(RiText.instances.length,10);
                RiText.disposeAll();
                equal(RiText.instances.length,0);

                RiText.disposeAll();
                equal(RiText.instances.length,0);
            });

            test("Private Objects", function() {

                equal(typeof RegexRule,'undefined');
                equal(typeof Conjugator,'undefined');
                equal(typeof PosTagger,'undefined');
                equal(typeof Analyzer,'undefined');
                equal(typeof MinEditDist,'undefined');
            });
            
            ////////////////////////////////////////////////////////////////////////////

            test("Member Functions[compat]", function() {
                RiTa.p5Compatible(1);
                ok(typeof RiText().fill=='function');
                ok(typeof RiText().textAlign=='function');
                ok(typeof RiText().textFont=='function');
                ok(typeof RiText().textSize=='function');
                ok(typeof RiText().setColor=='function');
            });

            test("Member Functions[!compat]", function() {
                RiTa.p5Compatible(0);
                ok(typeof RiText().fill=='undefined');
                ok(typeof RiText().textAlign=='undefined');
                ok(typeof RiText().textFont=='undefined');
                ok(typeof RiText().textSize=='undefined');
                ok(typeof RiText().setColor=='undefined');
                RiTa.p5Compatible(1);
            });

            test("Global Objects[compat]", function() {
                RiTa.p5Compatible(1);
                ok(typeof size=='function');
                ok(typeof background=='function');
                ok(typeof random=='function');
            });

            test("Global Objects[!compat]", function() {
                RiTa.p5Compatible(0);
                ok(typeof size=='function');
                ok(typeof background=='function');
                ok(typeof random=='function');
            });

            test("Public Statics[compat]", function() {
                
                RiTa.p5Compatible(1);
                equal(typeof RiText.setDefaultFont,'function');
                equal(typeof RiText.setDefaultColor,'function');
            });

            test("Public Statics[!compat]", function() {

                RiTa.p5Compatible(0);
                ok(typeof RiText.setDefaultFont,'undefined');
                ok(typeof RiText.setDefaultColor,'undefined');
                RiTa.p5Compatible(1);
            });
        });

    </script>
  <body>
    <h1 id="qunit-header">RiText[P5] Structure tests</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">test markup, will be hidden</div>
        <p>&nbsp; &nbsp;<a href="../../rita-api.html"><img src="imgs/rita-loading.gif" width=40></a>

        <p>
    <canvas id="mycanvas"></canvas>
  </body>
</html>
