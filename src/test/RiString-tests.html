<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

    <!-- $Id: RiString-tests.html,v 1.61 2012/08/12 00:43:32 dev Exp $ -->

    <head>
        <link rel="stylesheet" href="rita-test.css" type="text/css" media="screen"/>
        <script type="text/javascript" src="../../lib/jquery.js"></script>
        <script type="text/javascript" src="../../lib/qunit-git.js"></script>
        <script type="text/javascript" src="../rita_dict.js"></script>
        <script type="text/javascript" src="../rita_lts.js"></script>
        <script type="text/javascript" src="../rita.js"></script>
        <script>
        
var functions = [
    "analyze",
    "charAt",
    "concat",
    "containsWord",
    "endsWith",
    "equals",
    "equalsIgnoreCase",
    "get",
    "indexOf",
    "insertWordAt",
    "lastIndexOf",
    "length",
    "match",
    "pos",
    "posAt",
    "removeCharAt",
    "replaceCharAt",
    "replaceFirst",
    "replaceLast",
    "replaceAll",
    "replaceWordAt",
    "slice",
    "split",
    "startsWith",
    "substring",
    "substr",
    "text",
    "toCharArray",
    "toLowerCase",
    "toUpperCase",
    "trim",
    "wordAt",
    "wordCount",
    "words",
];

$(document).ready(function () {
    
    test("RiString.functions", function () {
    
    var rs = new RiString("The dog was white");
    for (var i = 0; i < functions.length; i++) {
    equal(typeof rs[functions[i]], 'function', functions[i]);
    }
    });
    
    test("RiString.stringify", function () {
    var data = [ [   [2], [],     ['ao'], ['r']       ],
    [   [0], ['g'],  ['ah'], []          ],
    [   [0], ['n'],  ['ah'], []          ],
    [   [1], ['z'],  ['ey'], []          ],
    [   [0], ['sh'], ['ah'], ['n', 'z']  ] ];
    var out =   "ao2-r g-ah0 n-ah0 z-ey1 sh-ah0-n-z";
    equal(RiString('')._stringify(data), out);
    });
    
    test("RiString.syllabify(string)", function () {
    
    var test = "ao2-r-g-ah0-n-ah0-z-ey1-sh-ah0-n-z";
    var expected = "ao2-r g-ah0 n-ah0 z-ey1 sh-ah0-n-z";
    var result = RiString('').syllabify(test);
    deepEqual(result, expected);
    });
    
    test("RiString.syllabify(array)", function () {
    
    var test = "ao2-r-g-ah0-n-ah0-z-ey1-sh-ah0-n-z".split('-');
    var expected = "ao2-r g-ah0 n-ah0 z-ey1 sh-ah0-n-z";
    var result = RiString('').syllabify(test);
    deepEqual(result, expected);
    });
    
    test("RiString.syllabify(batch1)", function () {
    
    var data = [
    ['d-eh1-n-l-ih0-n-jh-er0', 'd-eh1-n l-ih0-n jh-er0'],
    ['d-uw1-ah0-l', 'd-uw1 ah0-l'],
    ['d-ih2-s-ah0-l-aw1-d', 'd-ih2 s-ah0 l-aw1-d'],
    ['d-aa1-d-z', 'd-aa1-d-z'],
    ['d-r-ao1-l-z', 'd-r-ao1-l-z'],
    ['d-ay0-ae1-n-ah0', 'd-ay0 ae1 n-ah0'],
    ['ey1-t-f-ow2-l-d', 'ey1-t f-ow2-l-d'],
    ['eh1-m-t-iy0-d', 'eh1-m t-iy0-d'],
    ['ih0-r-ey1-s', 'ih0 r-ey1-s'],
    ['eh1-v-r-ah0-n', 'eh1-v r-ah0-n'],
    ['f-ae1-l-k', 'f-ae1-l-k'],
    ['f-eh1-n-w-ey2', 'f-eh1-n w-ey2'],
    ['f-ih1-sh-k-ih2-l', 'f-ih1-sh k-ih2-l'],
    ['f-ao1-r-b-ih0-d-ah0-n', 'f-ao1-r b-ih0 d-ah0-n'],
    ['f-r-eh1-n-t-s', 'f-r-eh1-n-t-s'],
    ['g-ae1-l-b-r-ey2-th', 'g-ae1-l b-r-ey2-th'],
    ['zh-ih0-l-eh1-t', 'zh-ih0 l-eh1-t'],
    ['jh-ih1-n-iy0', 'jh-ih1 n-iy0'],
    ['g-aa0-n-z-aa1-l-ah0-z', 'g-aa0-n z-aa1 l-ah0-z'],
    ['g-r-iy1-n-f-iy2-l-d', 'g-r-iy1-n f-iy2-l-d'],
    ['g-ih0-t-aa1-r-z', 'g-ih0 t-aa1-r-z'],
    ['hh-ae1-m-er0-ih0-ng', 'hh-ae1 m-er0 ih0-ng'],
    ['hh-ae1-t-ih0-n-d-ao0-r-f', 'hh-ae1 t-ih0-n d-ao0-r-f'],
    ['hh-eh1-m-ih0-ng-w-ey2', 'hh-eh1 m-ih0-ng w-ey2'],
    ['hh-ih1-ng-k-m-ah0-n', 'hh-ih1-ng-k m-ah0-n'],
    ['hh-ow1-n-eh0-k', 'hh-ow1 n-eh0-k'],
    ['hh-ah1-l-d', 'hh-ah1-l-d'],
    ['ih0-l-uw1-zh-ah0-n', 'ih0 l-uw1 zh-ah0-n'],
    ['ih0-n-f-ae2-ch-uw0-ey1-sh-ah0-n', 'ih0-n f-ae2 ch-uw0 ey1 sh-ah0-n'],
    ['ih0-n-t-er1-n-ah0-l-ay2-z', 'ih0-n t-er1 n-ah0 l-ay2-z'],
    ['ih0-z-ae1-n-s-k-iy0-z', 'ih0 z-ae1-n s-k-iy0-z'],
    ['jh-ow0-hh-ae1-n-ah0-s', 'jh-ow0 hh-ae1 n-ah0-s'],
    ['k-ae1-r-ah0-m', 'k-ae1 r-ah0-m'],
    ['k-aa1-k-iy0', 'k-aa1 k-iy0'],
    ['n-ey1-v', 'n-ey1-v']
    ];
    for ( var i = 0, l = data.length; i < l; i++) {
    var res = RiString("").syllabify(data[i][0]);
    equal(res, data[i][1]);
    }
    });
    
    test("RiString.syllabify(lex)", function () {
    ok(1);
    if (1) return; // not using this test now...
    
    var word, lex1, lex2, phones, words = RiLexicon().getWords();
    for ( var i = 0, l = words.length; i < l && i < 10; i++) {
    
    word = words[i];
    lex1 = RiLexicon._getInstance()._getRawPhones(word);
    phones = lex1.replace(/ /g,'-');
    lex2 = RiString("").syllabify(phones);
    //console.log('Lex: '+lex1+' Lts: '+lex2);
    equal(lex1, lex2);
    }
    });
    
    test("RiString()", function () {
    
    ok(RiString('hello'));
    ok(new RiString('hello'));
    ok(RiString(''));
    ok(new RiString(''));
    
    var BAD = [null, undefined, 1234];
    
    for (var i = 0; i < BAD.length; i++) {
    
    raises(function () {
    try {
    new RiString(BAD[i]);
    } catch (e) {
    throw e;
    }
    });
    raises(function () {
    try {
    RiString(BAD[i]);
    } catch (e) {
    throw e;
    }
    });
    }
    });
    
    test("RiString.analyze()", function () {
    
    var rs = RiString("The laggin dragon");
    rs.analyze();
    ok(rs.features);
    equal(rs.features.phonemes,"dh-ax l-ae-g-ih-n d-r-ae-g-ax-n");
    equal(rs.features.syllables,"dh-ax l-ae/g-ih-n d-r-ae-g/ax-n");
    equal(rs.features.stresses,"0 1/1 1/0");
    
    var rs = RiString("123");
    rs.analyze();
    ok(rs.features);
    equal(rs.features.phonemes,"w-ah-n-t-uw-th-r-iy");
    equal(rs.features.syllables,"w-ah-n/t-uw/th-r-iy");
    equal(rs.features.stresses,"0/0/0");
    
    var rs = RiString(".");
    rs.analyze();
    ok(rs.features);
    equal(rs.features.phonemes,"");
    equal(rs.features.syllables,"");
    equal(rs.features.stresses,"");
    
    var rs = RiString("123.");
    rs.analyze();
    ok(rs.features);
    equal(rs.features.phonemes,"w-ah-n-t-uw-th-r-iy");
    equal(rs.features.syllables,"w-ah-n/t-uw/th-r-iy");
    equal(rs.features.stresses,"0/0/0");
    
    var rs = RiString("1 2 7");
    rs.analyze();
    ok(rs.features);
    equal(rs.features.phonemes,"w-ah-n t-uw s-eh-v-ax-n");
    equal(rs.features.syllables,"w-ah-n t-uw s-eh/v-ax-n");
    equal(rs.features.stresses,"0 0 1/0");
    });
    
    test("RiString.charAt()", function () {
    
    var rs = new RiString("The dog was white");
    
    var result = rs.charAt(0);
    equal(result, "T");
    
    var result = rs.charAt(5);
    notEqual(result, "O");
    
    var result = rs.charAt(5);
    notEqual(result, '*');
    
    var result = rs.charAt(200); //out of range character
    equal(result, "");
    });
    
    test("RiString.concat()", function () { 
    
    var rs = new RiString("The dog was white");
    var rs2 = new RiString("The dog was not white");
    var result = rs.concat(rs2);
    equal(result, "The dog was whiteThe dog was not white");
    
    var rs = new RiString(" The dog was white ");
    var rs2 = new RiString("The dog was not white ");
    var result = rs.concat(rs2);
    equal(result, " The dog was white The dog was not white ");
    
    var rs = new RiString("#$#@#$@#");
    var rs2 = new RiString("The dog was not white ");
    var result = rs.concat(rs2);
    equal(result, "#$#@#$@#The dog was not white ");
    
    });
    
    test("RiString.containsWord", function () {
    
    // check that these are ok --- ------------
    var rs = new RiString("The dog was white");
    
    ok(rs.containsWord("dog"));
    ok(rs.containsWord(""));
    ok(!rs.containsWord("*"));
    ok(!rs.containsWord("."));
    ok(!rs.containsWord("brown"));
    });
    
    test("RiString.endsWith()", function () {
    
    // check that these are ok --------------
    
    var rs = new RiString("girls");
    var result = rs.endsWith("s");
    ok(result);
    
    var rs = new RiString("closed");
    var result = rs.endsWith("ed");
    ok(result);
    
    var rs = new RiString("The dog was white");
    var result = rs.endsWith("white");
    ok(result);
    
    var rs = new RiString("");
    var result = rs.endsWith("");
    ok(result);
    
    });
    
    test("RiString.equals()", function () { // compare Object
    
    // check that these are ok ---------------
    
    var rs = new RiString("closed");
    var rs2 = new RiString("closed");
    var result = rs.equals(rs2);
    ok(result);
    
    var rs = new RiString("closed");
    var rs2 = new RiString("Closed");
    var result = rs.equals(rs2);
    ok(!result);
    
    var rs = new RiString("clOsed");
    var rs2 = new RiString("closed");
    var result = rs.equals(rs2);
    ok(!result);
    
    var rs = new RiString("There is a cat.");
    var rs2 = new RiString("There is a cat.");
    var result = rs.equals(rs2);
    ok(result);
    
    var rs = new RiString("There is a cat.");
    var rs2 = new RiString("There is a cat. ");
    var result = rs.equals(rs2);
    ok(!result);
    
    var rs = new RiString("There is a cat.");
    var rs2 = new RiString("There is a cat");
    var result = rs.equals(rs2);
    ok(!result);
    
    var rs = new RiString("There is a cat.");
    var rs2 = new RiString("");
    var result = rs.equals(rs2);
    ok(!result);
    
    var rs = new RiString("");
    var rs2 = new RiString("");
    var result = rs.equals(rs2);
    ok(result);
    });
    
    test("RiString.equalsIgnoreCase()", function () {
    
    // check that these are ok ---------------
    
    var rs = new RiString("closed");
    var result = rs.equalsIgnoreCase("Closed");
    ok(result);
    
    var rs = new RiString("There is a cat.");
    var result = rs.equalsIgnoreCase("TheRe Is a cAt.");
    ok(result);
    
    var rs = new RiString("THere iS a Cat.");
    var result = rs.equalsIgnoreCase("TheRe Is a cAt.");
    ok(result);
    
    var rs = new RiString("THere iS a Cat.");
    var rs2 = new RiString("THere iS a Cat.");
    var result = rs.equalsIgnoreCase(rs2);
    ok(result);
    
    var rs = new RiString("THere iS a Cat.");
    var rs2 = new RiString("THere iS not a Cat.");
    var result = rs.equalsIgnoreCase(rs2);
    ok(!result);
    
    var rs = new RiString("");
    var result = rs.equalsIgnoreCase("");
    ok(result);
    
    });
    
    test("RiString.indexOf()", function () {
    
    // check that these are ok ---------------
    var rs = new RiString("Returns the array of words.");
    var result = rs.indexOf("e");
    equal(result, 1);
    
    var rs = new RiString("Returns the array of words .");
    var result = rs.indexOf("a");
    equal(result, 12);
    
    var rs = new RiString("s ."); //space
    var result = rs.indexOf(" ");
    equal(result, 1);
    
    var rs = new RiString("s  ."); //double space
    var result = rs.indexOf("  ");
    equal(result, 1);
    
    var rs = new RiString("s	."); //tab space
    var result = rs.indexOf("	");
    equal(result, 1);
    
    var rs = new RiString(" abc"); //space
    var result = rs.indexOf(" ");
    equal(result, 0);
    
    var rs = new RiString("  abc"); //double space
    var result = rs.indexOf("  ");
    equal(result, 0);
    
    var rs = new RiString("	abc"); //tap space
    var result = rs.indexOf("	");
    equal(result, 0);
    
    var rs = new RiString("Returns the array of words .");
    var result = rs.indexOf("array");
    equal(result, 12);
    
    var rs = new RiString("Returns the array of words.");
    var result = rs.indexOf(",");
    equal(result, -1);
    
    var rs = new RiString("Returns the array of words. Returns the array of words.");
    var result = rs.indexOf("a", 13);
    equal(result, 15);
    
    var rs = new RiString("Returns the array of words. Returns the array of words?");
    var result = rs.indexOf("array", 13);
    equal(result, 40);
    
    var rs = new RiString("Returns the array of words. Returns the array of words.");
    var result = rs.indexOf("");
    equal(result, 0);
    
    });
    
    test("RiString.insertWordAt()", function () { //join() added an extra space to the word with punctuation
    
    // check that these are ok ---------------
    var rs = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    var result = rs.insertWordAt("then", 4);
    equal(result.text(), rs.text());
    
    var rs = new RiString("inserts at wordIdx and shifts each subsequent word accordingly.");
    rs.insertWordAt("He", 0);
    var rs2 = "He inserts at wordIdx and shifts each subsequent word accordingly.";
    equal(rs.text(), rs2);
    
    var rs = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    rs.insertWordAt("newWord", 1);
    var rs2 = new RiString("Inserts newWord at wordIdx and shifts each subsequent word accordingly.");
    equal(rs.text(), rs2.text());
    
    var rs = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    rs.insertWordAt("newWord and newWords", 1);
    var rs2 = new RiString("Inserts newWord and newWords at wordIdx and shifts each subsequent word accordingly.");
    equal(rs.text(), rs2.text());
    
    var rs = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    var result = rs.insertWordAt("",5);
    var rs2 = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    equal(result.text(), rs2.text());
    
    var rs = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    var result = rs.insertWordAt(" ",5);  //space
    var rs2 = new RiString("Inserts at wordIdx and shifts   each subsequent word accordingly.");
    equal(result.text(), rs2.text());
    
    var rs = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    var result = rs.insertWordAt("  ",5);  //tab space
    var rs2 = new RiString("Inserts at wordIdx and shifts    each subsequent word accordingly.");
    equal(result.text(), rs2.text());
    
    // not sure what to do about this one, either it OR the next one will fail either way
    /* TODO: reconsider */
    var rs = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    rs.insertWordAt("**", 5);
    var rs2 = new RiString("Inserts at wordIdx and shifts ** each subsequent word accordingly.");
    equal(rs.text(), rs2.text(), "testing the (private) joinWords() actually [currently failing]");
    
    var rs = new RiString("Inserts at wordIdx shifting each subsequent word accordingly.");
    rs.insertWordAt(",", 3);
    var rs2 = new RiString("Inserts at wordIdx , shifting each subsequent word accordingly.");
    equal(rs.text(), rs2.text());
    
    var rs = new RiString("Inserts at wordIdx and shifts each subsequent word accordingly.");
    var result = rs.text();
    rs.insertWordAt("newWord",-2); //error -- (no change to original string);
    equal(result, rs.text());
    
    });
    
    test("RiString.lastIndexOf()", function () {  
    
    // check that these are ok --- ------------
    var rs = new RiString("Start at first character. Start at last character.");
    var result = rs.lastIndexOf("r");
    equal(result, 48);
    
    var rs = new RiString("Start at first character. Start at last character.");
    var result = rs.lastIndexOf("Start");
    equal(result, 26);
    
    var rs = new RiString("Start at first character. Start at last character.");
    var result = rs.lastIndexOf("start");
    equal(result, -1);
    
    var rs = new RiString("Start at first character. Start at last character.");
    var result = rs.lastIndexOf("a", 12);
    equal(result, 6);
    
    var rs = new RiString("Start at first character. Start at last character.");
    var result = rs.lastIndexOf("at", 12);
    equal(result, 6);
    
    var rs = new RiString("Start at first character. Start at last character.");
    var result = rs.lastIndexOf("");
    equal(result, rs.length()); // should be 50 or -1? 50(DCH)
    
    });
    
    test("RiString.length()", function () {
    
    var rs = new RiString("S");
    var result = rs.length();
    equal(result, 1);
    
    var rs = new RiString("s "); //space
    var result = rs.length();
    equal(result, 2);
    
    var rs = new RiString("s"+'\t'); //tab space
    var result = rs.length();
    equal(result, 2);
    
    var rs = new RiString(" s "); //2 space
    var result = rs.length();
    equal(result, 3);
    
    var rs = new RiString('\t'+"s"+'\t'); // 2 tab space
    var result = rs.length();
    equal(result, 3);
    
    var rs = new RiString("s b");
    var result = rs.length();
    equal(result, 3);
    
    var rs = new RiString("s b.");
    var result = rs.length();
    equal(result, 4);
    
    var rs = new RiString("s b ."); //space
    var result = rs.length();
    equal(result, 5);
    
    var rs = new RiString("s	b	."); //tab space
    var result = rs.length();
    equal(result, 5);
    
    var rs = new RiString("><><><#$!$@$@!$");
    var result = rs.length();
    equal(result, 15);
    
    var rs = new RiString("");
    var result = rs.length();
    equal(result, 0);
    
    // no error checks needed
    
    });
    
    test("RiString.match()", function () {
    
    var rs = new RiString("The rain in SPAIN stays mainly in the plain");
    var result = rs.match(/ain/g);
    deepEqual(result, ["ain","ain","ain"]);
    
    var rs = new RiString("The rain in SPAIN stays mainly in the plain");
    var result = rs.match(/ain/gi);
    deepEqual(result, ["ain","AIN","ain","ain"]);
    
    var rs = new RiString("Watch out for the rock!");
    var result = rs.match(/r?or?/g);
    deepEqual(result, ["o","or","ro"]);
    
    var rs = new RiString("abc!");
    var result = rs.match(/r?or?/g);
    deepEqual(result, []);
    
    });
    
    test("RiString.pos()", function () {
    
    // check that these are ok ---------------
    
    var txt = "The dog"; // tmp: move to RiTa.tests
    var words = RiTa.tokenize(txt);
    deepEqual(words,["The","dog"]);
    
    var words = RiTa.tokenize("closed"); // tmp: move to RiTa.tests
    deepEqual(words,["closed"]);
    
    var rs = new RiString("asdfaasd");
    var result = rs.pos();
    deepEqual(result, ["nn"]);
    
    var rs = new RiString("clothes");
    var result = rs.pos();
    deepEqual(result, ["nns"]);
    
    var rs = new RiString("There is a cat.");
    var result = rs.pos();
    deepEqual([  "ex","vbz","dt", "nn", "."], result);
    
    var rs = new RiString("The boy, dressed in red, ate an apple.");
    var result = rs.pos();
    deepEqual(
    [
    "dt",
    "nn",
    ",",
    "vbn",
    "in",
    "jj",
    ",",
    "vbd",
    "dt",
    "nn",
    "."
    ], result);
    
    });
    
    test("RiString.posAt()", function () {
    
    // check that these are ok ---------------
    
    var rs = new RiString("The emperor had no clothes on.");
    var result = rs.posAt(4);
    equal("nns", result);
    
    var rs = new RiString("There is a cat.");
    var result = rs.posAt(3);
    equal("nn", result);
    });
    
    test("RiString.removeCharAt()", function () {
    
    var rs = new RiString("The dog was white");
    var result = rs.removeCharAt(1);
    equal(rs.text(), "Te dog was white");
    
    var rs = new RiString("The dog was white");
    var result = rs.removeCharAt(rs.length()-1);
    equal(rs.text(), "The dog was whit");
    
    var rs = new RiString("The dog was white");
    var result = rs.removeCharAt(rs.length());
    equal(rs.text(), "The dog was white");
    
    var rs = new RiString("The dog was white");
    var result = rs.removeCharAt(0);
    equal(rs.text(), "he dog was white");
    
    var rs = new RiString("The dog was white");
    var result = rs.removeCharAt(-1);
    equal(rs.text(), "The dog was white");
    
    var rs = new RiString("The dog was white");
    var result = rs.removeCharAt(1000);
    equal(rs.text(), "The dog was white");
    
    var rs = new RiString("The dog was white.");
    var result = rs.removeCharAt(rs.length()-1);
    equal(rs.text(), "The dog was white");
    });
    
    test("RiString.replaceCharAt()", function () {
    
    var rs = new RiString("Who are you?");
    rs.replaceCharAt(2, "");
    equal(rs.text(), "Wh are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceCharAt(2, "e");
    equal(rs.text(), "Whe are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceCharAt(2, "ere");
    equal(rs.text(), "Where are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceCharAt(11, "!!");
    equal(rs.text(), "Who are you!!");
    
    var rs = new RiString("Who are you?");
    rs.replaceCharAt(0, "me");
    equal(rs.text(), "meho are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceCharAt(-1, "me");
    equal(rs.text(), "Who are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceCharAt(10000, "me");
    equal(rs.text(), "Who are you?");
    
    });
    
    test("RiString.replaceFirst()", function () {
    var rs = new RiString("Who are you?");
    rs.replaceFirst("e", "E");
    equal(rs.text(), "Who arE you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceFirst("o", "O");
    equal(rs.text(), "WhO are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceFirst("Who", "Where");
    equal(rs.text(), "Where are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceFirst("notExist", "Exist");
    equal(rs.text(), "Who are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceFirst("Who are", "Dare");
    equal(rs.text(), "Dare you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceFirst("Who aRe", "Dare");
    equal(rs.text(), "Who are you?");
    
    var rs = new RiString("Who are you? Who are you?");
    rs.replaceFirst("Who are", "Dare");
    equal(rs.text(), "Dare you? Who are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceFirst("", "");
    equal(rs.text(), "Who are you?");
    
    //regex
    
    var rs = new RiString("The rain in SPAIN stays mainly in the plain");
    rs.replaceFirst(/ain/,"ane");
    equal(rs.text(), "The rane in SPAIN stays mainly in the plain");
    
    var rs = new RiString("The rain in SPAIN stays mainly in the plain");
    rs.replaceFirst(/ain/i,"oll");
    equal(rs.text(), "The roll in SPAIN stays mainly in the plain");
    
    var rs = new RiString("Watch out for the rock!");
    rs.replaceFirst(/r?or?/, "a");
    equal(rs.text(), "Watch aut for the rock!");
    
    var rs = new RiString("The rain in SPAIN stays mainly in the plain");
    rs.replaceFirst(/in/, "");
    equal(rs.text(), "The ra in SPAIN stays mainly in the plain");
    
    var rs = new RiString("Who are you?");
    rs.replaceFirst("?", "?!");
    equal(rs.text(), "Who are you?!");
    });
    
    test("RiString.replaceLast()", function () { 
    
    var rs = new RiString("Who are you?");
    
    rs.replaceLast("e", "E");
    equal(rs.text(), "Who arE you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceLast("o", "O");
    equal(rs.text(), "Who are yOu?");
    
    var rs = new RiString("Who are you?");
    rs.replaceLast("Who", "Where");
    equal(rs.text(), "Where are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceLast("notExist", "Exist");
    equal(rs.text(), "Who are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceLast("Who are", "Dare");
    equal(rs.text(), "Dare you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceLast("Who aRe", "Dare");
    equal(rs.text(), "Who are you?");
    
    var rs = new RiString("Who are you? Who are you?");
    rs.replaceLast("Who are", "Dare");
    equal(rs.text(), "Who are you? Dare you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceLast("", "");
    equal(rs.text(), "Who are you?");
    
    //regex
    
    var rs = new RiString("The rain in SPAIN stays mainly in the plain");
    rs.replaceLast(/ain/, "ane");
    equal(rs.text(), "The rain in SPAIN stays mainly in the plane");
    
    var rs = new RiString("The rain in SPAIN stays mainly in the plain");
    rs.replaceLast(/ain/i, "ane");
    equal(rs.text(), "The rain in SPAIN stays mainly in the plane");
    
    var rs = new RiString("Watch out for the rock!");
    rs.replaceLast(/ ?r/, "wood");
    equal(rs.text(), "Watch out for the woodock!");
    
    var rs = new RiString("The rain in SPAIN stays mainly in the plain");
    rs.replaceLast(/in/, "");
    equal(rs.text(), "The rain in SPAIN stays mainly in the pla");
    
    var rs = new RiString("Who wuz you?");
    rs.replaceLast("u?", "?!");
    equal(rs.text(), "Who wuz yo?!");
    
    var rs = new RiString("Who are you{1,}");
    rs.replaceLast("{1,}", "!");
    equal(rs.text(), "Who are you!");
    
    var rs = new RiString("Who are you*");
    rs.replaceLast("*", "!");
    equal(rs.text(), "Who are you!");
    
    var rs = new RiString("Who are you+");
    rs.replaceLast("+", "!");
    equal(rs.text(), "Who are you!");
    
    var rs = new RiString("Who are you?");
    rs.replaceLast("?", "?!");
    equal(rs.text(), "Who are you?!");
    });
    
    test("RiString.replaceAll()", function () {
    
    var rs = new RiString("Who are you? Who is he? Who is it?");
    equal(rs.replaceAll("e", "E").text(), "Who arE you? Who is hE? Who is it?");
    
    var rs = new RiString("Who are you? Who is he? Who is it?");
    equal(rs.replaceAll("Who", "O").text(), "O are you? O is he? O is it?");
    
    var rs = new RiString("Whom is he? Where is he? What is it?");
    equal(rs.replaceAll("Wh*", "O").text(), "Oom is he? Oere is he? Oat is it?");
    
    var rs = new RiString("%^&%&?");
    equal(rs.replaceAll("%^&%&?", "!!!").text(), "%^&%&?");
    
    var rs = new RiString("Who are you?");
    equal(rs.replaceAll("notExist", "Exist").text(), "Who are you?");
    
    var rs = new RiString("Who are you?");
    equal(rs.replaceAll("", "").text(), "Who are you?");
    
    var rs = new RiString("");
    equal(rs.replaceAll("", "").text(), "");
    
    });
    
    test("RiString.replaceWordAt()", function () {
    
    var rs = new RiString("Who are you?");
    rs.replaceWordAt(2,"");    // nice! this too...
    equal(rs.text(), "Who are?"); // strange case, not sure
    //equal(rs.text(), "Who are ?");
    
    var rs = new RiString("Who are you?");
    equal("Who are What?", rs.replaceWordAt(2,"What").text());
    
    var rs = new RiString("Who are you?");
    equal(rs.replaceWordAt(0,"What").text(), "What are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceWordAt(3,"!!"); //
    equal(rs.text(), "Who are you!!"); // nice! this is a strange one...
    
    var rs = new RiString("Who are you?");
    rs.replaceWordAt(-1,"asfasf");
    equal(rs.text(), "Who are you?");
    
    var rs = new RiString("Who are you?");
    rs.replaceWordAt(20,"asfasf");
    equal(rs.text(), "Who are you?");
    
    });
    
    test("RiString.slice()", function () { //very similar to substring
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(1, 3).text(), "he");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(-3, -2).text(), "f");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(15, 500).text(), "Pavilion at the Venice Biennale is getting a much-needed facelift.");
    
    var rs = new RiString("!@#$%^&**()");
    equal(rs.slice(2, 5).text(), "#$%");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(15, 500).text(), "Pavilion at the Venice Biennale is getting a much-needed facelift.");
    
    var rs = new RiString("The Australian");
    equal(rs.slice(-5, -3).text(), "al");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(500, 501).text(), "");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(10, 10).text(), "");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(3, 1).text(), "");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(-2, 3).text(), "");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.slice(-2, -3).text(), "");
    
    });
    
    test("RiString.split()", function () {
    
    var rs = new RiString("Who are you?");
    var result = rs.split();
    var answer = [RiString("Who are you?")];
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split(" ");
    var answer = [RiString("Who"), RiString("are"), RiString("you?")];
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split("are");
    var answer = [RiString("Who "), RiString(" you?")];
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split("?");
    var answer = [RiString("Who are you"), RiString("")];
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split("W");
    var answer = [RiString(""), RiString("ho are you?")];
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split("abc");
    var answer = [RiString("Who are you?")];
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split("");
    var answer = [];
    var chars = ["W", "h", "o", " ", "a", "r", "e", " ", "y", "o", "u", "?"];
    for ( var i = 0; i < chars.length; i++) {
    answer[i] = RiString(chars[i]);
    }
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split("",3);
    var answer = [RiString("W"), RiString("h"), RiString("o")];
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split("",0);
    var answer = [];
    deepEqual(result, answer);
    
    var rs = new RiString("Who are you?");
    var result = rs.split("",100);
    var answer = [];
    var chars = ["W", "h", "o", " ", "a", "r", "e", " ", "y", "o", "u", "?"];
    for ( var i = 0; i < chars.length; i++) {
    answer[i] = RiString(chars[i]);
    }
    deepEqual(result, answer);
    
    });
    
    test("RiString.startsWith()", function () {
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(rs.startsWith("T"));
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(rs.startsWith("The"));
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(!rs.startsWith("Aus"));
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(!rs.startsWith("*"));
    
    var rs = new RiString("*The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(rs.startsWith("*"));
    
    var rs = new RiString(" The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(rs.startsWith(" ")); //single space
    
    var rs = new RiString("  The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(rs.startsWith("  ")); //double space
    
    var rs = new RiString("	The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(rs.startsWith("	")); // tab space
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    ok(rs.startsWith("")); // fail here should not be true -- DCH: this is ok -- everything matches ""
    
    });
    
    test("RiString.substring()", function () {
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substring(1, 3).text(), "he");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substring(3, 1).text(), "he");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substring(-2, 3).text(), "The");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substring(15, 500).text(), "Pavilion at the Venice Biennale is getting a much-needed facelift.");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substring(500, 501).text(), "");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substring(10, 10).text(), "");
    
    var rs = new RiString("!@#$%^&**()");
    equal(rs.substring(2, 5).text(), "#$%");
    
    var rs = new RiString("Start at first character.");
    equal(rs.substring(1, 5).text(), "tart");
    
    var rs = new RiString("Start at first character.");
    equal(rs.substring(0, 1).text(), "S");
    
    var rs = new RiString("Start at first character.");
    equal(rs.substring(0, 1).text(), "S");
    
    var rs = new RiString("Start at first character.");
    equal(rs.substring(3).text(), "rt at first character.");
    
    });
    
    test("RiString.substr()", function () { // Duplicated with substring() and slice()?
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substr(1, 3).text(), "he ");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substr(-2, 3).text(), "t.");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substr(15, 500).text(), "Pavilion at the Venice Biennale is getting a much-needed facelift.");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substr(500, 501).text(), "");
    
    var rs = new RiString("The Australian Pavilion at the Venice Biennale is getting a much-needed facelift.");
    equal(rs.substr(10, 10).text(), "lian Pavil");
    
    var rs = new RiString("!@#$%^&**()");
    equal(rs.substr(2, 5).text(), "#$%^&");
    
    });
    
    test("RiString.text()", function () {
    
    // check that these are ok ---------------
    var rs = new RiString("this door is closed");
    var result = rs.text();
    equal(result, "this door is closed");
    
    var rs = new RiString("this door, is closed.*&)*^");
    var result = rs.text();
    equal(result, "this door, is closed.*&)*^");
    
    var rs = new RiString("   this door    , is closed.");
    var result = rs.text();
    equal(result, "   this door    , is closed.");
    
    var rs = new RiString("this Door is closed");
    var result = rs.text();
    notEqual(result, "this door is closed");
    
    var rs = new RiString("");
    var result = rs.text();
    equal(result, "");
    
    // no error checks needed ------------
    
    });
    
    test("RiString.toCharArray()", function () {
    
    var rs = new RiString("The Australian Pavilion.");
    var result = rs.toCharArray();
    var answer = ["T", "h", "e", " ", "A", "u", "s", "t", "r", "a", "l", "i", "a", "n", " ", "P", "a", "v", "i", "l", "i", "o", "n", "."];
    deepEqual(result, answer);
    
    // no error checks needed ------------
    });
    
    test("RiString.toLowerCase()", function () {
    
    var rs = new RiString("The Australian Pavilion.");
    rs.toLowerCase();
    equal("the australian pavilion.", rs.text());
    
    var rs = new RiString("the Australian pavilion.");
    rs.toLowerCase();
    equal("the australian pavilion.", rs.text());
    
    var rs = new RiString(")(*(&^%%$!#$$%%^))");
    rs.toLowerCase();
    equal(")(*(&^%%$!#$$%%^))", rs.text());
    
    // no error checks needed
    
    });
    
    test("RiString.toUpperCase()", function () {
    
    var rs = new RiString("The Australian Pavilion.");
    equal("THE AUSTRALIAN PAVILION.", rs.toUpperCase().text());
    
    var rs = new RiString(")(*(&^%%$!#$$%%^))");
    rs.toUpperCase();
    equal(")(*(&^%%$!#$$%%^))", rs.text());
    
    // no error checks needed
    });
    
    test("RiString.trim()", function () {
    
    // check that these are ok ---------------
    var rs = new RiString("Start at first character. ");
    equal(rs.trim().text(), "Start at first character.");
    
    var rs = new RiString(" Start at first character.");
    equal(rs.trim().text(), "Start at first character.");
    
    var rs = new RiString("     Start at first character.   "); // tabs
    equal(rs.trim().text(), "Start at first character.");
    
    var rs = new RiString("     Start at first character.    "); // spaces/tabs
    equal(rs.trim().text(), "Start at first character.");
    
    //TODO: add tests for 'hard' tabs

    });
    
    test("RiString.wordAt()", function () {

    var rs = new RiString("Returns the word at wordIdx using the default WordTokenizer.");
    var result = rs.wordAt(0);
    equal(result, "Returns");
    
    var result = rs.wordAt(1);
    equal(result, "the");
    
    var result = rs.wordAt(9);
    equal(result, ".");
    
    var result = rs.wordAt(500);
    equal(result, "");
    
    var result = rs.wordAt(-5);
    equal(result, "");
    
    var rs = new RiString("");
    var result = rs.wordAt(0);
    equal(result, "");
    
    });
    
    test("RiString.wordCount()", function () {
    
    // check that these are ok --- ------------
    var rs = new RiString("Returns the word at wordIdx using the default WordTokenizer.");
    var result = rs.wordCount();
    equal(result, 10); // correct, according to WordTokenizer, need to try with RegexTokenizer
    
    var rs = new RiString("Returns the word.Returns the word. Returns the word .");
    var result = rs.wordCount();
    equal(result, 12);
    
    var rs = new RiString("   Returns the word at wordIdx , using the default WordTokenizer."); //space
    var result = rs.wordCount();
    equal(result, 11);
    
    var rs = new RiString("	Returns the word at wordIdx , using the default WordTokenizer.	"); //tab space
    var result = rs.wordCount();
    equal(result, 11);
    
    var rs = new RiString("");
    var result = rs.wordCount();
    equal(result, 0);
    
    });
    
    test("RiString.words()", function () {
    
    // check that these are ok ---------------
    var rs = new RiString("Returns the array of words.");
    var result = rs.words();
    var answer = ["Returns", "the", "array", "of", "words", "."];
    deepEqual(result, answer);
    
    var rs = new RiString("The boy, dressed in red, ate an array.");
    var result = rs.words();
    var answer = ["The", "boy", ",", "dressed", "in", "red", ",", "ate", "an", "array", "."];
    deepEqual(result, answer);
    
    var rs = new RiString("Returns the array of words .");
    var result = rs.words();
    var answer = ["Returns", "the", "array", "of", "words", "."];
    deepEqual(result, answer);
    
    var rs = new RiString("The boy, dressed in red , ate an array?");
    var result = rs.words();
    var answer = ["The", "boy", ",", "dressed", "in", "red", ",", "ate", "an", "array", "?"];
    deepEqual(result, answer);
    
    var rs = new RiString("");
    var result = rs.words();
    var answer = [""];
    deepEqual(result, answer);
    
    // no error checks needed
    });
    
    test("RiString.get()", function () {
    
    var rs = RiString("The laggin dragon").analyze();
    var ph = rs.get(RiTa.PHONEMES);
    var sy = rs.get(RiTa.SYLLABLES);
    var st = rs.get(RiTa.STRESSES);
    equal(ph,"dh-ax l-ae-g-ih-n d-r-ae-g-ax-n");
    equal(sy,"dh-ax l-ae/g-ih-n d-r-ae-g/ax-n");
    equal(st,"0 1/1 1/0");
    });

});
        </script>
    </head>

    <body>
        <h1 id="qunit-header">RiString tests</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>
        <div id="qunit-fixture">
            test markup, will be hidden
        </div>
        <p>
    <p>&nbsp; &nbsp;<a href="../../rita-api.html"><img src="imgs/rita-loading.gif" width=40></a>
    </body>

</html>